<section class="vs-custom" id="custom-designs">
  <div class="vs-custom__hero">
    <div class="vs-custom__hero-gloss" aria-hidden="true"></div>
    <h2 class="vs-custom__title">Custom Designs</h2>
    <p class="vs-custom__subtitle">
      Bespoke vac frames, wild finishes, precision fit. You dream it, we seal it.
    </p>
    <div class="vs-custom__cta">
      <a href="#custom-request" class="vs-btn vs-btn--primary">Start a custom request</a>
      <button class="vs-btn vs-btn--ghost" data-scroll="#custom-gallery">See examples</button>
    </div>
  </div>

  <div class="vs-custom__config" id="custom-config" aria-labelledby="config-heading">
    <h3 id="config-heading" class="vs-custom__h3">Quick configurator</h3>

    <div class="vs-custom__config-row">
      <div class="vs-field">
        <label class="vs-label">Finish</label>
        <div class="vs-segment" role="tablist" aria-label="Finish">
          <button class="vs-seg" data-finish="gloss" aria-selected="true">High-gloss</button>
          <button class="vs-seg" data-finish="satin">Satin</button>
          <button class="vs-seg" data-finish="matte">Matte</button>
        </div>
      </div>

      <div class="vs-field">
        <label class="vs-label">Frame size</label>
        <select class="vs-select" id="size-select">
          <option value="M">M</option>
          <option value="L" selected>L</option>
          <option value="XL">XL</option>
        </select>
      </div>

      <div class="vs-field">
        <label class="vs-label">Accent color</label>
        <div class="vs-swatches" role="radiogroup" aria-label="Accent color">
          <button class="vs-swatch is-active" style="--sw:#ff2bd6" aria-checked="true"></button>
          <button class="vs-swatch" style="--sw:#6b6bff"></button>
          <button class="vs-swatch" style="--sw:#00ffd1"></button>
          <button class="vs-swatch" style="--sw:#ffd400"></button>
          <button class="vs-swatch" style="--sw:#ff6b6b"></button>
        </div>
      </div>

      <div class="vs-field vs-field--addons">
        <label class="vs-label">Add-ons</label>
        <label class="vs-check"><input type="checkbox" data-addon="window"> Clear window</label>
        <label class="vs-check"><input type="checkbox" data-addon="ports"> Breathing ports</label>
        <label class="vs-check"><input type="checkbox" data-addon="qr"> Quick-release</label>
      </div>

      <div class="vs-quote">
        <div class="vs-quote__pill">
          <span class="vs-quote__label">Estimated</span>
          <span class="vs-quote__price" id="quote-price">$579</span>
        </div>
        <button class="vs-btn vs-btn--accent" data-scroll="#custom-request">Lock this in</button>
      </div>
    </div>
  </div>

  <div class="vs-custom__gallery" id="custom-gallery" aria-labelledby="gallery-heading">
    <h3 id="gallery-heading" class="vs-custom__h3">Recent customs</h3>
    <div class="vs-track">
      <figure class="vs-card">
        <div class="vs-card__img" aria-hidden="true"></div>
        <figcaption class="vs-card__cap">XL • Gloss • Neon magenta</figcaption>
      </figure>
      <figure class="vs-card">
        <div class="vs-card__img" aria-hidden="true"></div>
        <figcaption class="vs-card__cap">L • Satin • Cobalt</figcaption>
      </figure>
      <figure class="vs-card">
        <div class="vs-card__img" aria-hidden="true"></div>
        <figcaption class="vs-card__cap">M • Matte • Seafoam</figcaption>
      </figure>
      <figure class="vs-card">
        <div class="vs-card__img" aria-hidden="true"></div>
        <figcaption class="vs-card__cap">XL • Gloss • Canary</figcaption>
      </figure>
      <figure class="vs-card">
        <div class="vs-card__img" aria-hidden="true"></div>
        <figcaption class="vs-card__cap">L • Satin • Coral</figcaption>
      </figure>
    </div>
  </div>

  <div class="vs-custom__process" aria-labelledby="process-heading">
    <h3 id="process-heading" class="vs-custom__h3">How it works</h3>
    <ol class="vs-steps">
      <li class="vs-step">
        <span class="vs-step__icon" aria-hidden="true"></span>
        <div class="vs-step__body">
          <h4>Design brief</h4>
          <p>Tell us dimensions, finish, and spice level. Rough sketches welcome.</p>
        </div>
      </li>
      <li class="vs-step">
        <span class="vs-step__icon" aria-hidden="true"></span>
        <div class="vs-step__body">
          <h4>Mockups</h4>
          <p>We send glossy renders and confirm hardware details before build.</p>
        </div>
      </li>
      <li class="vs-step">
        <span class="vs-step__icon" aria-hidden="true"></span>
        <div class="vs-step__body">
          <h4>Build & QA</h4>
          <p>Hand-built PVC frame, airtight bag fit, and a final seal check.</p>
        </div>
      </li>
    </ol>
  </div>

  <form class="vs-custom__request" id="custom-request">
    <h3 class="vs-custom__h3">Start your custom</h3>
    <div class="vs-form">
      <label class="vs-label">Your email
        <input type="email" class="vs-input" placeholder="you@example.com" required>
      </label>
      <label class="vs-label">Brief
        <textarea class="vs-input" rows="4" placeholder="Sizes, finish, accents…"></textarea>
      </label>
      <button class="vs-btn vs-btn--primary" type="submit">Submit request</button>
    </div>
    <p class="vs-hint">Submitting doesn’t charge you. We’ll reply with a finalized quote.</p>
  </form>
</section>

<style>
/* ——— Scoped theme ——— */
.vs-custom{
  --bg:#0a0b0e; --card:#0f1016; --muted:#a9acb8; --text:#e9ecf6;
  --accent:#ff2bd6; --accent-2:#6b6bff; --accent-3:#00ffd1; --accent-4:#ffd400; --accent-5:#ff6b6b;
  --ring:rgba(255,255,255,.14);
  --gloss: conic-gradient(from 200deg at 30% 0%, rgba(255,255,255,.35), rgba(255,255,255,0) 35%);
  color:var(--text); background:linear-gradient(180deg,#0a0b0e, #090a10 60%, #0a0b0e);
  border-radius:0; overflow:hidden; position:relative; isolation:isolate;
  box-shadow:0 1px 0 rgba(255,255,255,.04) inset, 0 40px 80px rgba(0,0,0,.45);
}
.vs-custom *{box-sizing:border-box}

/* ——— Hero ——— */
.vs-custom__hero{
  position:relative; padding:56px 20px; text-align:center;
  background:
    radial-gradient(1200px 300px at 50% 0%, color-mix(in oklab, var(--accent) 28%, transparent) , transparent 60%),
    radial-gradient(900px 260px at 50% 100%, color-mix(in oklab, var(--accent-2) 22%, transparent), transparent 60%);
}
.vs-custom__hero-gloss{
  position:absolute; inset:-10% -10% auto -10%; height:120px; pointer-events:none;
  background:linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,0));
  -webkit-mask-image:linear-gradient(180deg, #000, transparent);
          mask-image:linear-gradient(180deg, #000, transparent);
  filter:blur(6px);
}
.vs-custom__title{ font-size:clamp(28px,4vw,44px); margin:0 0 8px; letter-spacing:.5px }
.vs-custom__subtitle{ margin:0 auto 20px; max-width:72ch; color:var(--muted) }
.vs-custom__cta{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap }

/* ——— Buttons ——— */
.vs-btn{ appearance:none; border:1px solid transparent; background:#181a22; color:var(--text);
  padding:12px 16px; border-radius:12px; font-weight:600; cursor:pointer; line-height:1; transition:.2s;
}
.vs-btn:hover{ transform:translateY(-1px) }
.vs-btn:focus-visible{ outline:2px solid var(--ring); outline-offset:2px }
.vs-btn--primary{
  background:linear-gradient(180deg, color-mix(in oklab, var(--accent) 25%, #000), #0b0b0f);
  border-color:color-mix(in oklab, var(--accent) 45%, transparent);
  box-shadow:inset 0 1px rgba(255,255,255,.2), 0 10px 30px color-mix(in oklab, var(--accent) 20%, transparent);
}
.vs-btn--accent{
  background:linear-gradient(180deg, color-mix(in oklab, var(--accent-3) 30%, #000), #0a1110);
  border-color:color-mix(in oklab, var(--accent-3) 40%, transparent);
  box-shadow:inset 0 1px rgba(255,255,255,.2), 0 10px 30px color-mix(in oklab, var(--accent-3) 20%, transparent);
}
.vs-btn--ghost{ background:transparent; border-color:var(--ring) }

/* ——— Configurator ——— */
.vs-custom__config{ padding:18px 16px 10px }
.vs-custom__h3{ margin:20px 14px; font-size:18px; color:#d7dbeb }
.vs-custom__config-row{
  display:grid; gap:14px; align-items:end;
  grid-template-columns:1fr; 
}
@media (min-width:720px){
  .vs-custom__config-row{ grid-template-columns:1fr 160px 1fr 1.2fr auto }
}
.vs-field{ display:flex; flex-direction:column; gap:8px }
.vs-field--addons{ gap:10px }
.vs-label{ font-size:12px; text-transform:uppercase; letter-spacing:.12em; color:#b9bfd3 }
.vs-segment{ display:flex; gap:6px; background:#0f1118; padding:6px; border-radius:12px; border:1px solid var(--ring) }
.vs-seg{ flex:1; background:transparent; color:var(--text); border:0; padding:10px 12px; border-radius:8px; cursor:pointer }
.vs-seg[aria-selected="true"]{
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  box-shadow:inset 0 1px rgba(255,255,255,.15); border:1px solid rgba(255,255,255,.12);
}
.vs-select,.vs-input{
  width:100%; background:#0f1118; color:var(--text); border:1px solid var(--ring); border-radius:10px; padding:10px 12px
}
.vs-swatches{ display:flex; gap:8px }
.vs-swatch{
  width:28px; height:28px; border-radius:999px; border:2px solid rgba(255,255,255,.22);
  background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.55), transparent 35%), var(--sw);
  box-shadow:inset 0 -8px 18px rgba(0,0,0,.35), 0 0 0 0px color-mix(in oklab, var(--sw) 40%, transparent);
  cursor:pointer; transition:.18s;
}
.vs-swatch.is-active{ box-shadow:inset 0 -8px 18px rgba(0,0,0,.35), 0 0 0 3px color-mix(in oklab, var(--sw) 40%, transparent) }
.vs-check{ display:inline-flex; align-items:center; gap:8px; font-size:14px; color:#c7cbe0 }
.vs-check input{ accent-color:var(--accent) }

.vs-quote{ display:flex; align-items:center; gap:10px; justify-content:flex-end }
.vs-quote__pill{
  display:inline-flex; align-items:baseline; gap:8px; padding:10px 12px; border-radius:999px;
  background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.12); box-shadow:inset 0 1px rgba(255,255,255,.2);
}
.vs-quote__label{ font-size:12px; color:#b9bfd3; text-transform:uppercase; letter-spacing:.12em }
.vs-quote__price{ font-weight:800 }

/* ——— Gallery ——— */
.vs-custom__gallery{ padding:8px 0 2px }
.vs-track{
  display:grid; scroll-padding-inline: 1rem; gap: .5rem; grid-auto-flow:column; grid-auto-columns:80%;
  overflow:auto; padding:0 16px 14px; scroll-snap-type:x mandatory; scrollbar-width:thin;
}
@media (min-width:760px){
  .vs-track{ grid-auto-columns:minmax(280px,1fr) }
}
.vs-card{ scroll-snap-align:start; background:var(--card); border:1px solid rgba(255,255,255,.08);
  border-radius:16px; overflow:hidden; box-shadow:0 12px 30px rgba(0,0,0,.35)
}
.vs-card__img{
  aspect-ratio: 3 / 2;
  background:
    radial-gradient(600px 160px at 50% -10%, rgba(255,255,255,.28), transparent 40%),
    linear-gradient(140deg, color-mix(in oklab, var(--accent) 35%, #000), #0b0d14 45%, #0b0b0e 70%);
  position:relative;
}
.vs-card__img::after{
  content:""; position:absolute; inset:auto 0 0 0; height:36%;
  background:var(--gloss)
}
.vs-card__cap{ margin:10px 12px 12px; color:#d3d7e6; font-size:14px }

/* ——— Process ——— */
.vs-custom__process{ padding:8px 16px 2px }
.vs-steps{ list-style:none; padding:0; margin:0; display:grid; gap:12px }
@media (min-width:760px){ .vs-steps{ grid-template-columns:repeat(3,1fr) } }
.vs-step{ display:flex; gap:12px; padding:12px; background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius:14px }
.vs-step__icon{
  width:34px; height:34px; border-radius:10px;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.6), transparent 35%),
    linear-gradient(180deg, color-mix(in oklab, var(--accent) 40%, #000), #0c0c10);
  box-shadow:inset 0 -10px 18px rgba(0,0,0,.35)
}
.vs-step__body h4{ margin:2px 0 4px; font-size:15px }
.vs-step__body p{ margin:0; color:#b9bfd3; font-size:14px }

/* ——— Request form ——— */
.vs-custom__request{ padding:8px 16px 22px }
.vs-form{ display:grid; gap:12px; max-width:720px }
.vs-hint{ margin:.5rem 0 0; color:#9aa0b3; font-size:12px }
</style>

<script>
(() => {
  const root = document.currentScript.closest('.vs-custom');
  const state = {
    accent: getComputedStyle(root).getPropertyValue('--accent').trim(),
    finish: 'gloss',
    size: 'L',
    addons: { window:false, ports:false, qr:false }
  };

  function updateTheme(accent) {
    root.style.setProperty('--accent', accent);
    // Subtle glow to tie the section together
    root.style.boxShadow = `0 1px 0 rgba(255,255,255,.04) inset, 0 40px 80px ${accent}22, 0 80px 160px rgba(0,0,0,.45)`;
  }

  function estimate() {
    let base = { M: 479, L: 579, XL: 689 }[state.size];
    const finishAdj = state.finish === 'gloss' ? 40 : state.finish === 'satin' ? 20 : 0;
    const add = (state.addons.window?60:0) + (state.addons.ports?25:0) + (state.addons.qr?35:0);
    return base + finishAdj + add;
  }

  function drawQuote() {
    const el = root.querySelector('#quote-price');
    if (el) el.textContent = `$${estimate()}`;
  }

  // Finish segment
  root.querySelectorAll('.vs-seg').forEach(btn => {
    btn.addEventListener('click', () => {
      root.querySelectorAll('.vs-seg').forEach(b => b.setAttribute('aria-selected','false'));
      btn.setAttribute('aria-selected','true');
      state.finish = btn.dataset.finish;
      drawQuote();
    });
  });

  // Size select
  const sizeSel = root.querySelector('#size-select');
  sizeSel.addEventListener('change', e => {
    state.size = e.target.value;
    drawQuote();
  });

  // Swatches
  root.querySelectorAll('.vs-swatch').forEach(sw => {
    sw.addEventListener('click', () => {
      root.querySelectorAll('.vs-swatch').forEach(s => s.classList.remove('is-active'));
      sw.classList.add('is-active');
      const c = getComputedStyle(sw).getPropertyValue('--sw').trim();
      state.accent = c;
      updateTheme(c);
    });
  });

  // Add-ons
  root.querySelectorAll('[data-addon]').forEach(chk => {
    chk.addEventListener('change', () => {
      state.addons[chk.dataset.addon] = chk.checked;
      drawQuote();
    });
  });

  // Smooth scroll for in-section links
  root.querySelectorAll('[data-scroll]').forEach(btn => {
    btn.addEventListener('click', () => {
      const t = root.querySelector(btn.getAttribute('data-scroll'));
      if (t) t.scrollIntoView({ behavior:'smooth', block:'start' });
    });
  });

  drawQuote();
})();
</script>